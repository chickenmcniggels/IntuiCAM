# AI Development Guidelines

This document provides guidelines for AI-assisted development in the IntuiCAM project, ensuring consistent quality and maintainability of code and documentation.

---

## 1. Code Generation Principles

When using AI tools for code generation, follow these guidelines:

* **Always reference documentation**: Before implementing any feature or fixing any bug, review the official documentation:
  * [Qt Documentation](https://doc.qt.io/qt-6/) for GUI components
  * [OpenCASCADE Documentation](https://dev.opencascade.org/doc/) for geometry operations
  * [pybind11 Documentation](https://pybind11.readthedocs.io/) for Python bindings
  
* **Follow project architecture**: Generated code must adhere to the architecture outlined in [architecture.md](architecture.md)
  
* **Maintain coding standards**: Follow the coding style described in [development.md](development.md)
  
* **Verify compatibility**: Ensure compatibility with specific versions of dependencies:
  * Qt 6.6+ (min 6.2) with OpenGL and OpenGLWidgets components
  * OpenCASCADE 7.6.0+ (Note: Recent versions have reorganized library names)
  * pybind11 2.9.0+
  * C++17 standard

---

## 2. Testing Requirements

Code generated by AI must include appropriate tests:

* **High-level tests**: Integration and functional tests that verify component behavior
  * For Core: Test each new algorithm or feature with representative input
  * For GUI: Test UI workflows and interactions
  
* **Low-level tests**: Unit tests for individual functions and methods
  * Follow GoogleTest framework conventions
  * Test edge cases and error handling
  * Aim for high code coverage of critical paths

* **Test automation**: All tests should be executable via CTest and integrated into CI workflows

Example unit test structure:

```cpp
TEST(GeometryModule, IntersectionCalculation) {
  // Setup
  Point3D p1(0, 0, 0);
  Point3D p2(1, 1, 1);
  
  // Exercise
  auto result = calculate_intersection(p1, p2);
  
  // Verify
  EXPECT_NEAR(result.x, 0.5, 1e-6);
  EXPECT_NEAR(result.y, 0.5, 1e-6);
  EXPECT_NEAR(result.z, 0.5, 1e-6);
}
```

---

## 3. Documentation Requirements

When AI generates or modifies code, documentation must be updated to maintain consistency:

* **Code comments**: Include clear, concise Doxygen-style comments for public APIs

* **User guides**: Update relevant user guides in `docs/` to reflect new features or changes

* **API documentation**: Maintain accurate API documentation for the Core library

* **Breaking changes**: Document any breaking changes in a dedicated upgrade guide

* **README updates**: Keep README.md up-to-date with the latest features and installation instructions

---

## 4. Commit and Pull Request Guidelines

When submitting AI-generated code:

* **Split logical changes**: Divide large changes into smaller, focused commits
  
* **Clear commit messages**: Write descriptive commit messages explaining what changed and why
  
* **Reference issues**: Link commits to relevant GitHub issues
  
* **Review carefully**: Manually review all AI-generated code before committing

---

## 5. Best Practices for AI-Generated Refactoring

When using AI to refactor existing code:

* **Preserve behavior**: Ensure refactored code maintains identical behavior
  
* **Run tests before and after**: Verify that tests pass both before and after refactoring
  
* **Focus on readability**: Use AI to improve code clarity and maintainability
  
* **Document rationale**: Explain why the refactoring was done in commit messages

---

## 6. Version Compatibility

AI-generated code must respect version constraints:

* **Backward compatibility**: Preserve API compatibility within major versions
  
* **Feature detection**: Check for feature availability rather than version numbers when possible
  
* **Graceful degradation**: Provide fallback options for missing features in older versions

---

## 7. OpenCASCADE Library Name Changes

Recent versions of OpenCASCADE have reorganized library names. When working with OCCT libraries, use the updated names:

* **Data Exchange Libraries**:
  * ~~`TKSTEP`~~ → `TKDESTEP` (STEP file import/export)
  * ~~`TKIGES`~~ → `TKDEIGES` (IGES file import/export)
  * ~~`TKSTL`~~ → `TKDESTL` (STL file import/export)
  * ~~`TKVRML`~~ → `TKDEVRML` (VRML file import/export)

* **Removed Libraries**: The following libraries have been consolidated:
  * `TKSTEP209`, `TKSTEPAttr`, `TKSTEPBase` → All functionality moved to `TKDESTEP`

* **CMake Configuration**: When configuring CMake for projects using OpenCASCADE:
  * Ensure Qt6 includes `OpenGL` and `OpenGLWidgets` components
  * Use minimal library sets to avoid linking issues with non-existent libraries
  * Reference the official OCCT samples for current best practices

---

By following these guidelines, AI-assisted development can enhance productivity while maintaining the high quality standards of the IntuiCAM project. 